# 第一阶段集成测试清单

## 环境准备

```bash
# 1. 安装前端依赖
cd frontend && npm install && cd ..

# 2. 构建前端
cd frontend && npm run build && cd ..

# 3. 配置环境变量
cp .env.example .env
# 编辑 .env 设置 SECRET_KEY

# 4. 启动服务
docker-compose up -d

# 5. 访问 http://localhost
```

## 测试场景

### 1. 管理员登录
- [x] 访问 `/login` 页面
- [x] 使用默认账号 `admin/admin123` 登录
- [x] 登录成功后跳转到管理后台
- [x] 无效凭证显示错误提示

### 2. 直播源管理
- [x] 访问 `/admin/sources`
- [x] 添加直播源（RTMP 或 HLS 地址）https://srs.hiwords.net/live/livestream.m3u8
- [x] 编辑直播源信息
- [x] 检测直播源状态（在线/离线）
- [x] 删除直播源（确认对话框正常）

### 3. 手动录制
- [x] 在直播源列表点击"开始录制"
- [x] 录制状态变为"录制中"
- [x] 访问 `/admin/tasks` 查看录制任务
- [x] 点击"停止录制"
- [x] 录制完成后生成视频文件（12.8 MB）

### 4. 定时录制
- [x] 访问 `/admin/schedules`
- [x] 创建定时计划（如 `0 * * * *` 每小时）
- [x] 验证 cron 表达式无效时显示错误
- [x] 查看下次执行时间
- [x] 启用/禁用定时计划
- [x] 删除定时计划

### 5. 视频播放
- [x] 访问首页 `/` 查看视频列表
- [x] 搜索视频
- [x] 点击视频卡片进入详情页
- [x] HLS 播放器正常播放
- [x] 观看次数增加

### 6. 视频管理
- [x] 访问 `/admin/videos`
- [x] 编辑视频标题
- [x] 删除视频（确认对话框）
- [x] 文件同时被删除

### 7. 系统状态
- [x] 访问 `/admin/system`
- [x] 显示 CPU/内存/磁盘使用率
- [x] 顶部状态栏显示关键指标
- [x] 30秒自动刷新

### 8. 错误处理
- [x] 无效 token 返回 401 并跳转登录
- [x] 删除正在录制的直播源显示错误
- [x] 网络错误显示友好提示

## 性能验收

- [ ] 支持 5 路直播同时录制
- [ ] 点播支持 50+ 并发观看
- [x] 页面响应时间 < 2 秒

## 已知限制

- 第一阶段不包含：观看码系统、文件上传、审核流程、音频提取
- 这些功能将在后续阶段实现

## 测试备注

- **Login.vue 修复**：原文件只是占位符，已实现完整登录表单
- 使用真实 HLS 直播流测试：https://srs.hiwords.net/live/livestream.m3u8
- 录制测试生成视频：4.5 MB (1:25) 和 12.8 MB
- 测试日期：2026-01-15
