/**
 * MediaStack Admin Theme
 * Modern Professional Media Workstation Aesthetic
 *
 * Color Palette:
 * - Primary: #E94560 (Crimson Red)
 * - Secondary: #8B5CF6 (Purple)
 * - Background: #0a0e1a (Deep Navy)
 * - Surface: rgba(15, 20, 35, 0.6) (Dark Blue with transparency)
 * - Text: #e4e7eb (Light Gray)
 */

/* Global Element Plus Overrides for Dark Theme */

/* Dialog */
.el-dialog {
  background: rgba(15, 20, 35, 0.95);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
}

.el-dialog__header {
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  padding: 24px;
}

.el-dialog__title {
  color: #fff;
  font-size: 20px;
  font-weight: 600;
}

.el-dialog__body {
  color: #e4e7eb;
  padding: 24px;
}

.el-dialog__footer {
  border-top: 1px solid rgba(255, 255, 255, 0.05);
  padding: 20px 24px;
}

.el-dialog__headerbtn .el-dialog__close {
  color: rgba(255, 255, 255, 0.6);
  font-size: 20px;
}

.el-dialog__headerbtn:hover .el-dialog__close {
  color: #E94560;
}

/* Form */
.el-form-item__label {
  color: rgba(255, 255, 255, 0.7);
  font-weight: 500;
}

.el-input__wrapper {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  box-shadow: none;
  transition: all 0.3s ease;
}

.el-input__wrapper:hover {
  border-color: rgba(233, 69, 96, 0.3);
}

.el-input__wrapper.is-focus {
  border-color: #E94560;
  box-shadow: 0 0 0 3px rgba(233, 69, 96, 0.1);
}

.el-input__inner {
  color: #e4e7eb;
}

.el-input__inner::placeholder {
  color: rgba(255, 255, 255, 0.3);
}

.el-textarea__inner {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  color: #e4e7eb;
}

.el-textarea__inner::placeholder {
  color: rgba(255, 255, 255, 0.3);
}

.el-textarea__inner:hover {
  border-color: rgba(233, 69, 96, 0.3);
}

.el-textarea__inner:focus {
  border-color: #E94560;
  box-shadow: 0 0 0 3px rgba(233, 69, 96, 0.1);
}

/* Select */
.el-select__wrapper {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  box-shadow: none;
}

.el-select__wrapper:hover {
  border-color: rgba(233, 69, 96, 0.3);
}

.el-select__wrapper.is-focused {
  border-color: #E94560;
  box-shadow: 0 0 0 3px rgba(233, 69, 96, 0.1);
}

.el-select__placeholder {
  color: rgba(255, 255, 255, 0.3);
}

.el-select-dropdown {
  background: rgba(15, 20, 35, 0.95);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
}

.el-select-dropdown__item {
  color: #e4e7eb;
}

.el-select-dropdown__item:hover {
  background: rgba(233, 69, 96, 0.1);
}

.el-select-dropdown__item.is-selected {
  background: rgba(233, 69, 96, 0.2);
  color: #E94560;
  font-weight: 600;
}

/* Switch */
.el-switch__core {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.el-switch.is-checked .el-switch__core {
  background: linear-gradient(135deg, #E94560 0%, #8B5CF6 100%);
  border-color: transparent;
}

/* Radio & Checkbox */
.el-radio__input.is-checked .el-radio__inner {
  background: #E94560;
  border-color: #E94560;
}

.el-radio__label {
  color: #e4e7eb;
}

.el-checkbox__input.is-checked .el-checkbox__inner {
  background: #E94560;
  border-color: #E94560;
}

.el-checkbox__label {
  color: #e4e7eb;
}

/* Message Box */
.el-message-box {
  background: rgba(15, 20, 35, 0.95);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
}

.el-message-box__title {
  color: #fff;
}

.el-message-box__content {
  color: #e4e7eb;
}

.el-message-box__btns .el-button--primary {
  background: linear-gradient(135deg, #E94560 0%, #8B5CF6 100%);
  border: none;
}

/* Message */
.el-message {
  background: rgba(15, 20, 35, 0.95);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
}

.el-message__content {
  color: #e4e7eb;
}

.el-message--success {
  border-color: rgba(16, 185, 129, 0.3);
}

.el-message--warning {
  border-color: rgba(245, 158, 11, 0.3);
}

.el-message--error {
  border-color: rgba(239, 68, 68, 0.3);
}

/* Pagination */
.el-pagination {
  color: #e4e7eb;
}

.el-pagination button {
  background: rgba(255, 255, 255, 0.05);
  color: #e4e7eb;
  border-radius: 6px;
}

.el-pagination button:hover {
  background: rgba(233, 69, 96, 0.1);
  color: #E94560;
}

.el-pagination .el-pager li {
  background: rgba(255, 255, 255, 0.05);
  color: #e4e7eb;
  border-radius: 6px;
  margin: 0 4px;
}

.el-pagination .el-pager li:hover {
  background: rgba(233, 69, 96, 0.1);
  color: #E94560;
}

.el-pagination .el-pager li.is-active {
  background: linear-gradient(135deg, #E94560 0%, #8B5CF6 100%);
  color: #fff;
}

/* Upload */
.el-upload {
  border: 2px dashed rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  background: rgba(255, 255, 255, 0.02);
  transition: all 0.3s ease;
}

.el-upload:hover {
  border-color: #E94560;
  background: rgba(233, 69, 96, 0.05);
}

.el-upload-dragger {
  background: transparent;
  border: none;
}

.el-upload-dragger .el-icon {
  color: rgba(255, 255, 255, 0.4);
}

.el-upload-dragger:hover .el-icon {
  color: #E94560;
}

.el-upload__text {
  color: #e4e7eb;
}

.el-upload__tip {
  color: rgba(255, 255, 255, 0.4);
}

/* Progress */
.el-progress__text {
  color: #e4e7eb;
}

.el-progress-bar__outer {
  background: rgba(255, 255, 255, 0.1);
}

.el-progress-bar__inner {
  background: linear-gradient(135deg, #E94560 0%, #8B5CF6 100%);
}

/* Tabs */
.el-tabs__header {
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.el-tabs__item {
  color: rgba(255, 255, 255, 0.6);
}

.el-tabs__item:hover {
  color: #E94560;
}

.el-tabs__item.is-active {
  color: #E94560;
}

.el-tabs__active-bar {
  background: linear-gradient(135deg, #E94560 0%, #8B5CF6 100%);
}

/* Card */
.el-card {
  background: rgba(15, 20, 35, 0.6);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.05);
  border-radius: 12px;
  color: #e4e7eb;
}

.el-card__header {
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  color: #fff;
  font-weight: 600;
}

/* Popover */
.el-popover {
  background: rgba(15, 20, 35, 0.95);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
  color: #e4e7eb;
}

.el-popover__title {
  color: #fff;
}

/* Tooltip */
.el-tooltip__popper {
  background: rgba(15, 20, 35, 0.95);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  color: #e4e7eb;
}

.el-tooltip__popper[data-popper-placement^="top"] .el-popper__arrow::before {
  border-top-color: rgba(15, 20, 35, 0.95);
}

.el-tooltip__popper[data-popper-placement^="bottom"] .el-popper__arrow::before {
  border-bottom-color: rgba(15, 20, 35, 0.95);
}

.el-tooltip__popper[data-popper-placement^="left"] .el-popper__arrow::before {
  border-left-color: rgba(15, 20, 35, 0.95);
}

.el-tooltip__popper[data-popper-placement^="right"] .el-popper__arrow::before {
  border-right-color: rgba(15, 20, 35, 0.95);
}

/* Scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.02);
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.15);
}

/* Utility Classes */
.gradient-text {
  background: linear-gradient(135deg, #E94560 0%, #8B5CF6 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.glass-panel {
  background: rgba(15, 20, 35, 0.6);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.05);
  border-radius: 12px;
}

.glow-border {
  box-shadow: 0 0 20px rgba(233, 69, 96, 0.3);
}

/* ==================== Mobile Dialog Improvements ==================== */

/* Dialog overlay z-index - must be higher than sidebar (200) */
.el-overlay {
  z-index: 1000 !important;
}

.el-dialog__wrapper {
  z-index: 1000 !important;
}

.el-dialog {
  z-index: 1001 !important;
}

/* ==================== SCROLL LOCK ==================== */
/* Critical: Lock body scroll when ANY dialog is open */

/* When dialog-open class is added to body (by main.ts observer) */
body.dialog-open {
  overflow: hidden !important;
  position: fixed !important;
  width: 100vw !important;
  width: 100dvw !important; /* Dynamic viewport width for mobile browsers */
  height: 100vh !important;
  height: 100dvh !important; /* Dynamic viewport height for mobile browsers */
  left: 0 !important;
  top: 0 !important;
  margin: 0 !important;
  padding: 0 !important;
  overscroll-behavior: none !important;
  touch-action: none !important;
  -webkit-overflow-scrolling: touch !important;
}

/* Prevent body scroll with any dialog-open related class */
body[class*="dialog-open"] {
  overflow: hidden !important;
  position: fixed !important;
  width: 100vw !important;
  height: 100vh !important;
  left: 0 !important;
  top: 0 !important;
  margin: 0 !important;
  overscroll-behavior: none !important;
  touch-action: none !important;
}

/* ==================== MOBILE DIALOG STYLES ==================== */

@media (max-width: 768px) {
  /* Reset html element as well */
  html:has(.el-dialog__wrapper) {
    overflow: hidden !important;
  }

  /* Overlay - must prevent any background interaction */
  .el-overlay {
    position: fixed !important;
    inset: 0 !important;
    width: 100vw !important;
    width: 100dvw !important;
    height: 100vh !important;
    height: 100dvh !important;
    overflow: hidden !important;
    background-color: rgba(0, 0, 0, 0.7) !important;
    touch-action: none !important;
    overscroll-behavior: none !important;
    box-sizing: border-box !important;
  }

  /* Dialog wrapper - container for dialog positioning */
  .el-dialog__wrapper {
    position: fixed !important;
    inset: 0 !important;
    width: 100vw !important;
    width: 100dvw !important;
    height: 100vh !important;
    height: 100dvh !important;
    overflow: hidden !important;
    display: flex !important;
    align-items: flex-end !important;
    justify-content: center !important;
    margin: 0 !important;
    padding: 0 !important;
    box-sizing: border-box !important;
    touch-action: none !important;
  }

  /* Dialog - bottom sheet style - MUST override inline styles from width prop */
  .el-dialog,
  .el-dialog[style*="width"] {
    width: 100vw !important;
    width: 100dvw !important;
    max-width: 100vw !important;
    max-width: 100dvw !important;
    min-width: 100vw !important;
    margin: 0 !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    position: relative !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    top: auto !important;
    border-radius: 20px 20px 0 0 !important;
    max-height: 90vh !important;
    max-height: 90dvh !important;
    display: flex !important;
    flex-direction: column !important;
    transform: translateY(0) !important;
    animation: slideUp 0.3s cubic-bezier(0.16, 1, 0.3, 1) !important;
    box-shadow: 0 -10px 40px rgba(0, 0, 0, 0.5) !important;
    box-sizing: border-box !important;
    overflow: hidden !important;
    border: none !important;
    outline: none !important;
  }

  @keyframes slideUp {
    from {
      transform: translateY(100%);
    }
    to {
      transform: translateY(0);
    }
  }

  /* Hide scrollbar but keep functionality */
  .el-dialog::-webkit-scrollbar,
  .el-dialog__body::-webkit-scrollbar {
    width: 0 !important;
    height: 0 !important;
    display: none !important;
  }

  .el-dialog,
  .el-dialog__body {
    scrollbar-width: none !important; /* Firefox */
    -ms-overflow-style: none !important; /* IE/Edge */
  }

  /* Dialog header - compact, sticky at top */
  .el-dialog__header {
    padding: 16px 20px !important;
    flex-shrink: 0 !important;
    border-bottom: 1px solid rgba(255, 255, 255, 0.08) !important;
    background: rgba(15, 20, 35, 0.95) !important;
    border-radius: 20px 20px 0 0 !important;
    overflow: hidden !important;
  }

  .el-dialog__title {
    font-size: 16px !important;
    font-weight: 600 !important;
    line-height: 1.4 !important;
    padding-right: 32px !important;
    color: #fff !important;
  }

  .el-dialog__headerbtn {
    top: 12px !important;
    right: 12px !important;
    width: 32px !important;
    height: 32px !important;
    touch-action: manipulation !important;
  }

  .el-dialog__headerbtn .el-dialog__close {
    font-size: 20px !important;
    color: rgba(255, 255, 255, 0.6) !important;
  }

  /* Dialog body - scrollable content area */
  .el-dialog__body {
    padding: 16px 20px !important;
    max-height: calc(90dvh - 140px) !important; /* Account for header + footer */
    overflow-y: auto !important;
    overflow-x: hidden !important;
    flex: 1 !important;
    -webkit-overflow-scrolling: touch !important;
    overscroll-behavior: contain !important;
    touch-action: pan-y !important; /* Allow vertical scroll only */
    box-sizing: border-box !important;
  }

  /* Dialog footer - sticky at bottom */
  .el-dialog__footer {
    padding: 12px 20px 20px !important;
    padding-bottom: max(12px, env(safe-area-inset-bottom)) !important; /* iPhone X+ */
    flex-shrink: 0 !important;
    display: flex !important;
    flex-wrap: wrap !important;
    gap: 8px !important;
    border-top: 1px solid rgba(255, 255, 255, 0.08) !important;
    background: rgba(15, 20, 35, 0.95) !important;
    overflow: hidden !important;
    box-sizing: border-box !important;
  }

  /* ==================== FORM ADJUSTMENTS ==================== */

  .el-form {
    display: block !important;
    box-sizing: border-box !important;
  }

  .el-form-item {
    display: block !important;
    margin-bottom: 16px !important;
    box-sizing: border-box !important;
  }

  .el-form-item__label {
    font-size: 14px !important;
    margin-bottom: 8px !important;
    display: block !important;
    width: 100% !important;
    text-align: left !important;
    line-height: 1.5 !important;
    box-sizing: border-box !important;
  }

  .el-form-item__content {
    width: 100% !important;
    margin-left: 0 !important;
    line-height: 1.5 !important;
    box-sizing: border-box !important;
  }

  /* Input and select - full width */
  .el-input,
  .el-input__wrapper,
  .el-select,
  .el-select-wrapper,
  .el-date-picker,
  .el-date-editor,
  .el-textarea__inner,
  .el-input-number,
  .el-cascader,
  .el-upload {
    width: 100% !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
  }

  /* Select dropdown - proper sizing and touch handling */
  .el-select-dropdown {
    width: auto !important;
    min-width: 200px !important;
    max-width: 100vw !important;
    box-sizing: border-box !important;
    touch-action: pan-y !important; /* Only allow vertical scroll in dropdown */
    overscroll-behavior: contain !important;
  }

  /* Prevent dropdown from causing body scroll */
  .el-select-dropdown__wrap {
    overscroll-behavior: contain !important;
    touch-action: pan-y !important;
  }

  .el-select-dropdown__list {
    overscroll-behavior: contain !important;
    touch-action: pan-y !important;
  }

  /* Button adjustments - full width on mobile */
  .el-dialog__footer .el-button {
    flex: 1 1 auto !important;
    min-width: 0 !important;
    margin: 0 !important;
    padding: 10px 16px !important;
    font-size: 14px !important;
    touch-action: manipulation !important;
  }

  /* ==================== TABS ==================== */

  .el-tabs__header {
    margin: 0 0 16px 0 !important;
    display: flex !important;
    overflow-x: auto !important;
    -webkit-overflow-scrolling: touch !important;
    overscroll-behavior: contain !important;
  }

  .el-tabs__nav-wrap {
    display: flex !important;
  }

  .el-tabs__item {
    padding: 0 12px !important;
    font-size: 14px !important;
    white-space: nowrap !important;
    touch-action: manipulation !important;
  }

  /* ==================== TABLE ==================== */

  .el-table {
    font-size: 12px !important;
    overflow-x: auto !important;
    -webkit-overflow-scrolling: touch !important;
  }

  .el-table th,
  .el-table td {
    padding: 8px 4px !important;
  }

  /* ==================== ROW/COL ==================== */

  .el-row,
  .el-col {
    width: 100% !important;
    max-width: 100% !important;
    flex: 0 0 100% !important;
    box-sizing: border-box !important;
  }

  .el-col-8,
  .el-col-12,
  .el-col-24 {
    width: 100% !important;
    flex: 0 0 100% !important;
    max-width: 100% !important;
  }

  /* ==================== NUMBER INPUT ==================== */

  .el-input-number {
    width: 100% !important;
    line-height: normal !important;
  }

  .el-input-number .el-input__wrapper {
    width: 100% !important;
  }

  .el-input-number__decrease,
  .el-input-number__increase {
    background: rgba(255, 255, 255, 0.05) !important;
    touch-action: manipulation !important;
  }

  /* ==================== CHECKBOX/RADIO ==================== */

  .el-checkbox-group,
  .el-radio-group {
    display: flex !important;
    flex-wrap: wrap !important;
    gap: 8px !important;
  }

  .el-checkbox,
  .el-radio {
    margin-right: 0 !important;
    margin-bottom: 8px !important;
    touch-action: manipulation !important;
  }

  .el-checkbox__label,
  .el-radio__label {
    font-size: 14px !important;
  }

  /* ==================== SWITCH ==================== */

  .el-switch {
    height: 24px !important;
    touch-action: manipulation !important;
  }

  /* ==================== CARD ==================== */

  .el-card {
    margin-bottom: 12px !important;
  }

  .el-card__header {
    padding: 12px 16px !important;
  }

  .el-card__body {
    padding: 12px 16px !important;
  }

  /* ==================== ALERT ==================== */

  .el-alert {
    font-size: 13px !important;
  }

  .el-alert__title {
    font-size: 13px !important;
  }

  /* ==================== SLIDER ==================== */

  .el-slider {
    padding: 0 4px !important;
  }

  .el-slider__button-wrapper {
    width: 24px !important;
    height: 24px !important;
    touch-action: none !important; /* Prevent page drag when using slider */
  }

  .el-slider__runway {
    height: 6px !important;
  }

  /* ==================== VIDEO IN DIALOG ==================== */

  video {
    max-width: 100% !important;
    max-height: 240px !important;
    object-fit: contain !important;
  }
}

/* ==================== Fix Select Dropdown Scroll ==================== */

/* Prevent body scroll when select dropdown is open */
.el-select-dropdown.is-multiple .el-select-dropdown__wrap {
  max-height: 200px !important;
}

.el-select-dropdown__wrap {
  max-height: 274px !important;
}

.el-select-dropdown__list {
  max-height: 274px !important;
  overflow-y: auto !important;
}
